{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '42651911-b9e9cf23b752713c606cec899';\nconst BASE_URL = 'https://pixabay.com/api/';\nexport let page = 1;\n\nexport async function getPhotos(searchQuery, page) {\n  const searchparams = new URLSearchParams({\n    key: API_KEY,\n    q: searchQuery,\n    image_type: 'horizontal',\n    safesearch: 'true',\n    orientation: 'horizontal',\n    per_page: 15,\n    page: page,\n  });\n\n  const response = await axios.get(`${BASE_URL}?${searchparams}`);\n  return response.data;\n}\n","export function createMurkup(data) {\n  const container = document.querySelector('.gallery-container');\n  const murcup = data.hits\n    .map(\n      element => `<div class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${element.largeImageURL}\">\n    <img class=\"gallery-image\" src=\"${element.webformatURL}\" alt=\"${element.tags}\">\n    </a>\n    <div class=\"gallery-info\">\n    <p class=\"gallety-info-item\"><span class=\"gallery-item-text\">Likes:</span>${element.likes}</p>\n    <p class=\"gallety-info-item\"><span class=\"gallery-item-text\">Views:</span>${element.views}</p>\n    <p class=\"gallety-info-item\"><span class=\"gallery-item-text\">Comments:</span>${element.comments}</p>\n    <p class=\"gallety-info-item\"><span class=\"gallery-item-text\">Downloads:</span>${element.downloads}</p>\n    </div>\n      </div>`\n    )\n    .join('');\n  container.insertAdjacentHTML('beforeend', murcup);\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { getPhotos } from './js/pixabay-api.js';\nimport { createMurkup } from './js/render-functions.js';\n\nconst container = document.querySelector('.gallery-container');\nconst searchInput = document.querySelector('.form-input');\nconst formEl = document.querySelector('.form');\nconst fetchLoadBtn = document.querySelector('.load-button');\nlet page = 1;\nconst limit = 15;\nconst totalPages = Math.ceil(100 / limit);\nlet searchQuery = '';\n\nfetchLoadBtn.style.display = 'none';\n\nconst lightbox = new SimpleLightbox('.gallery-link', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\nfunction smoothScroll() {\n  const galleryItemHeight = document\n    .querySelector('.gallery-item')\n    .getBoundingClientRect().height;\n  window.scrollBy({\n    top: galleryItemHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nformEl.addEventListener('submit', async function (event) {\n  event.preventDefault();\n  container.insertAdjacentHTML('beforeend', '<span class=\"loader\"></span>');\n  searchQuery = searchInput.value.trim();\n\n  fetchLoadBtn.style.display = 'block';\n  if (searchQuery !== '') {\n    try {\n      const data = await getPhotos(searchQuery, page);\n      createMurkup(data);\n      const loaderEl = document.querySelector('.loader');\n      loaderEl.remove();\n      lightbox.refresh();\n      smoothScroll();\n    } catch (error) {\n      console.log(error);\n    }\n  } else {\n    fetchLoadBtn.style.display = 'none';\n    container.innerHTML = '';\n    iziToast.error({\n      title: 'Error',\n      position: 'topRight',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n  }\n  searchInput.value = '';\n});\n\nfetchLoadBtn.addEventListener('click', async () => {\n  if (page > totalPages) {\n    return iziToast.error({\n      position: 'topRight',\n      message: \"We're sorry, there are no more posts to load\",\n    });\n  }\n\n  try {\n    const pages = (page += 1);\n    const data = await getPhotos(searchQuery, pages);\n    createMurkup(data);\n    lightbox.refresh();\n  } catch (error) {\n    console.log(error);\n  }\n});\n"],"names":["API_KEY","BASE_URL","getPhotos","searchQuery","page","searchparams","axios","createMurkup","data","container","murcup","element","searchInput","formEl","fetchLoadBtn","limit","totalPages","lightbox","SimpleLightbox","smoothScroll","galleryItemHeight","event","error","iziToast","pages"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAGV,eAAeC,EAAUC,EAAaC,EAAM,CACjD,MAAMC,EAAe,IAAI,gBAAgB,CACvC,IAAKL,EACL,EAAGG,EACH,WAAY,aACZ,WAAY,OACZ,YAAa,aACb,SAAU,GACV,KAAMC,CACV,CAAG,EAGD,OADiB,MAAME,EAAM,IAAI,GAAGL,CAAQ,IAAII,CAAY,EAAE,GAC9C,IAClB,CCnBO,SAASE,EAAaC,EAAM,CACjC,MAAMC,EAAY,SAAS,cAAc,oBAAoB,EACvDC,EAASF,EAAK,KACjB,IACCG,GAAW;AAAA,oCACmBA,EAAQ,aAAa;AAAA,sCACnBA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA;AAAA,gFAGAA,EAAQ,KAAK;AAAA,gFACbA,EAAQ,KAAK;AAAA,mFACVA,EAAQ,QAAQ;AAAA,oFACfA,EAAQ,SAAS;AAAA;AAAA,aAGhG,EACA,KAAK,EAAE,EACVF,EAAU,mBAAmB,YAAaC,CAAM,CAClD,CCXA,MAAMD,EAAY,SAAS,cAAc,oBAAoB,EACvDG,EAAc,SAAS,cAAc,aAAa,EAClDC,EAAS,SAAS,cAAc,OAAO,EACvCC,EAAe,SAAS,cAAc,cAAc,EAC1D,IAAIV,EAAO,EACX,MAAMW,EAAQ,GACRC,EAAa,KAAK,KAAK,IAAMD,CAAK,EACxC,IAAIZ,EAAc,GAElBW,EAAa,MAAM,QAAU,OAE7B,MAAMG,EAAW,IAAIC,EAAe,gBAAiB,CACnD,aAAc,MACd,aAAc,GAChB,CAAC,EACD,SAASC,GAAe,CACtB,MAAMC,EAAoB,SACvB,cAAc,eAAe,EAC7B,sBAAqB,EAAG,OAC3B,OAAO,SAAS,CACd,IAAKA,EAAoB,EACzB,SAAU,QACd,CAAG,CACH,CAEAP,EAAO,iBAAiB,SAAU,eAAgBQ,EAAO,CAMvD,GALAA,EAAM,eAAc,EACpBZ,EAAU,mBAAmB,YAAa,8BAA8B,EACxEN,EAAcS,EAAY,MAAM,OAEhCE,EAAa,MAAM,QAAU,QACzBX,IAAgB,GAClB,GAAI,CACF,MAAMK,EAAO,MAAMN,EAAUC,EAAaC,CAAI,EAC9CG,EAAaC,CAAI,EACA,SAAS,cAAc,SAAS,EACxC,OAAM,EACfS,EAAS,QAAO,EAChBE,GACD,OAAQG,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,MAEDR,EAAa,MAAM,QAAU,OAC7BL,EAAU,UAAY,GACtBc,EAAS,MAAM,CACb,MAAO,QACP,SAAU,WACV,QACE,0EACR,CAAK,EAEHX,EAAY,MAAQ,EACtB,CAAC,EAEDE,EAAa,iBAAiB,QAAS,SAAY,CACjD,GAAIV,EAAOY,EACT,OAAOO,EAAS,MAAM,CACpB,SAAU,WACV,QAAS,8CACf,CAAK,EAGH,GAAI,CACF,MAAMC,EAASpB,GAAQ,EACjBI,EAAO,MAAMN,EAAUC,EAAaqB,CAAK,EAC/CjB,EAAaC,CAAI,EACjBS,EAAS,QAAO,CACjB,OAAQK,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,CAAC"}